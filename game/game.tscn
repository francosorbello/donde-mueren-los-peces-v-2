[gd_scene load_steps=10 format=3 uid="uid://bonpimefflpqa"]

[ext_resource type="Script" uid="uid://du0h6bbque5tf" path="res://game/game.gd" id="1_u5opy"]
[ext_resource type="PackedScene" uid="uid://ccv23w3x8awof" path="res://tests/bigger_scene_test.tscn" id="2_dxrkv"]
[ext_resource type="PackedScene" uid="uid://dhhtspm33j6vk" path="res://tests/tilemap_test_2.tscn" id="3_4fuuu"]
[ext_resource type="Shader" uid="uid://b2me4ti8lr66k" path="res://crt_shader/crt_shader.gdshader" id="4_dxrkv"]
[ext_resource type="PackedScene" uid="uid://crtgn3p57vbx3" path="res://tests/debug_oxygen_bar.tscn" id="6_3vho3"]
[ext_resource type="PackedScene" uid="uid://djic11w1vg7yn" path="res://inventory_system/inventory_manager.tscn" id="6_dakft"]
[ext_resource type="PackedScene" uid="uid://ttyngsx7731n" path="res://inventory_system/ui/inventory_ui.tscn" id="6_u5opy"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_dxrkv"]
shader = ExtResource("4_dxrkv")
shader_parameter/scanline_color = Color(0, 0, 0, 1)
shader_parameter/flicker_color = Color(0, 0, 0, 1)
shader_parameter/scanlines_count = 10.0
shader_parameter/scanlines_intensity = 0.05
shader_parameter/flicker_speed = 0.0
shader_parameter/flicker_intensity = 0.025
shader_parameter/color_offset = 1.5
shader_parameter/blur = 0.15

[sub_resource type="ViewportTexture" id="ViewportTexture_4fuuu"]
viewport_path = NodePath("CenterContainer/SubViewportContainer/GameViewport")

[node name="Game" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("1_u5opy")
levels = Dictionary[String, PackedScene]({
"level1": ExtResource("2_dxrkv"),
"level2": ExtResource("3_4fuuu")
})

[node name="InventoryManager" parent="." instance=ExtResource("6_dakft")]

[node name="BGColor" type="ColorRect" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
color = Color(0.09411765, 0.09803922, 0.13725491, 1)

[node name="CenterContainer" type="CenterContainer" parent="."]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -576.0
offset_top = -540.0
offset_right = 576.0
offset_bottom = 540.0
grow_horizontal = 2
grow_vertical = 2

[node name="SubViewportContainer" type="SubViewportContainer" parent="CenterContainer"]
custom_minimum_size = Vector2(1152, 0)
layout_mode = 2
mouse_target = true

[node name="GameViewport" type="SubViewport" parent="CenterContainer/SubViewportContainer"]
unique_name_in_owner = true
transparent_bg = true
handle_input_locally = false
canvas_item_default_texture_filter = 0
physics_object_picking = true
size = Vector2i(1152, 1080)
size_2d_override = Vector2i(288, 270)
size_2d_override_stretch = true
render_target_update_mode = 4

[node name="CRTShader" type="TextureRect" parent="CenterContainer"]
material = SubResource("ShaderMaterial_dxrkv")
layout_mode = 2
texture = SubResource("ViewportTexture_4fuuu")

[node name="UI" type="Control" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2

[node name="DebugOxygenBar" parent="UI" instance=ExtResource("6_3vho3")]
layout_mode = 0

[node name="InventoryUI" parent="UI" node_paths=PackedStringArray("inventory_manager") instance=ExtResource("6_u5opy")]
layout_mode = 1
inventory_manager = NodePath("../../InventoryManager")
