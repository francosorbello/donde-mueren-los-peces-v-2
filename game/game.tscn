[gd_scene load_steps=18 format=3 uid="uid://bonpimefflpqa"]

[ext_resource type="Script" uid="uid://du0h6bbque5tf" path="res://game/game.gd" id="1_u5opy"]
[ext_resource type="Resource" uid="uid://ov7dh4x4dwtb" path="res://utils/level_related/initial_level_res.tres" id="2_qf6n1"]
[ext_resource type="Shader" uid="uid://b2me4ti8lr66k" path="res://crt_shader/crt_shader.gdshader" id="4_dxrkv"]
[ext_resource type="PackedScene" uid="uid://djic11w1vg7yn" path="res://inventory_system/inventory_manager.tscn" id="6_dakft"]
[ext_resource type="PackedScene" uid="uid://ttyngsx7731n" path="res://inventory_system/ui/inventory_ui.tscn" id="6_u5opy"]
[ext_resource type="PackedScene" uid="uid://b0dihdq7wavq6" path="res://oxygen_manager/ui/oxygen_bar.tscn" id="7_3vho3"]
[ext_resource type="AudioStream" uid="uid://cepgk4i3tauqe" path="res://assets/SOUNDS/music/Retro Ambience 02.mp3" id="8_3vho3"]
[ext_resource type="PackedScene" uid="uid://2tvde1g7baq6" path="res://tests/debug_timer.tscn" id="8_vsp63"]
[ext_resource type="PackedScene" uid="uid://ce5m7b223yfg6" path="res://level_system/automap/automap.tscn" id="8_y36n6"]
[ext_resource type="AudioStream" uid="uid://ceskirg5tq6wp" path="res://assets/SOUNDS/music/WAV_Donâ€™t_Look_Back.mp3" id="9_qf6n1"]
[ext_resource type="AudioStream" uid="uid://dt73qjnoy4jew" path="res://assets/SOUNDS/music/WAV_This_Could_Be_Anywhere_in_the_World.mp3" id="10_vsp63"]
[ext_resource type="AudioStream" uid="uid://delhiq2cjt60q" path="res://assets/SOUNDS/music/WAV_Who_Are_You.mp3" id="11_b686c"]
[ext_resource type="PackedScene" uid="uid://bq36b0nga2k5y" path="res://game/game_console_commands.tscn" id="12_qf6n1"]
[ext_resource type="Script" uid="uid://c8h0kq00glgpg" path="res://game/game_blackboard.gd" id="14_b686c"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_dxrkv"]
shader = ExtResource("4_dxrkv")
shader_parameter/scanline_color = Color(0, 0, 0, 1)
shader_parameter/flicker_color = Color(0, 0, 0, 1)
shader_parameter/scanlines_count = 10.0
shader_parameter/scanlines_intensity = 0.05
shader_parameter/flicker_speed = 0.0
shader_parameter/flicker_intensity = 0.025
shader_parameter/color_offset = 1.5
shader_parameter/blur = 0.15

[sub_resource type="ViewportTexture" id="ViewportTexture_4fuuu"]
viewport_path = NodePath("CenterContainer/SubViewportContainer/GameViewport")

[sub_resource type="AudioStreamPlaylist" id="AudioStreamPlaylist_hb504"]
shuffle = true
stream_count = 4
stream_0 = ExtResource("8_3vho3")
stream_1 = ExtResource("9_qf6n1")
stream_2 = ExtResource("10_vsp63")
stream_3 = ExtResource("11_b686c")

[node name="Game" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("1_u5opy")
initial_level_name = ExtResource("2_qf6n1")

[node name="InventoryManager" parent="." instance=ExtResource("6_dakft")]

[node name="BGColor" type="ColorRect" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
color = Color(0.09411765, 0.09803922, 0.13725491, 1)

[node name="CenterContainer" type="CenterContainer" parent="."]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -576.0
offset_top = -540.0
offset_right = 576.0
offset_bottom = 540.0
grow_horizontal = 2
grow_vertical = 2

[node name="SubViewportContainer" type="SubViewportContainer" parent="CenterContainer"]
custom_minimum_size = Vector2(1152, 0)
layout_mode = 2
mouse_target = true

[node name="GameViewport" type="SubViewport" parent="CenterContainer/SubViewportContainer"]
unique_name_in_owner = true
transparent_bg = true
handle_input_locally = false
canvas_item_default_texture_filter = 0
physics_object_picking = true
size = Vector2i(1152, 1080)
size_2d_override = Vector2i(288, 270)
size_2d_override_stretch = true
render_target_update_mode = 4

[node name="CRTShader" type="TextureRect" parent="CenterContainer"]
material = SubResource("ShaderMaterial_dxrkv")
layout_mode = 2
texture = SubResource("ViewportTexture_4fuuu")

[node name="UI" type="Control" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2

[node name="InventoryUI" parent="UI" node_paths=PackedStringArray("inventory_manager") instance=ExtResource("6_u5opy")]
layout_mode = 1
inventory_manager = NodePath("../../InventoryManager")

[node name="Automap" parent="UI" instance=ExtResource("8_y36n6")]
visible = false
layout_mode = 1

[node name="OxygenBar" parent="UI" instance=ExtResource("7_3vho3")]
custom_minimum_size = Vector2(30, 700)
layout_mode = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -354.0
offset_top = 185.0
offset_right = -324.0
offset_bottom = 885.0
grow_horizontal = 0

[node name="DebugTimer" parent="UI" instance=ExtResource("8_vsp63")]
layout_mode = 1

[node name="Music" type="AudioStreamPlayer" parent="."]
stream = SubResource("AudioStreamPlaylist_hb504")
volume_db = -10.0
autoplay = true

[node name="GameConsoleCommands" parent="." instance=ExtResource("12_qf6n1")]

[node name="GameBlackboard" type="Node" parent="." groups=["blackboard"]]
script = ExtResource("14_b686c")
